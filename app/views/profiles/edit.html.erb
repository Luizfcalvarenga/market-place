<div class="page-wrapper">
  <div class="d-flex justify-content-between align-items-center">

    <% if current_user.full_name.present? %>
      <h1 class="title"><%= current_user.full_name %></h1>
    <% else %>
      <h1 class="title"><%= current_user.email %></h1>
    <% end %>

    <% if current_user.photo.attached? %>
      <div class="around">
        <%= cl_image_tag current_user.photo.key, crop: :fit, class: "avatar-profile mb-2" %>
      </div>
    <% else %>
      <div class="around">
        <%= image_tag "avatar-bike.png", class: "avatar-profile mb-2" %>
      </div>
    <% end %>
  </div>


  <div class="card-profile br-12 p-5">
    <div class="d-flex justify-content-between flex-wrap">
      <button type="button" class="profile-links edit-modal" data-bs-toggle="modal" data-bs-target="#exampleModal">
        <i class="fas fa-edit me-2"></i>EDITAR USUÁRIO
      </button>
      <%= link_to advertisements_path, class: " profile-links text-success" do %>
        <i class="fas fa-shopping-bag me-2 "></i>ANÚNCIOS
      <% end %>
      <%= link_to my_products_path, class: "profile-links text-success" do %>
        <i class="fab fa-product-hunt me-2"></i>PRODUTOS
      <% end %>
      <%= link_to likes_path, class: "profile-links text-success" do %>
        <i class="fas fa-heart me-2"></i>FAVORITOS
      <% end %>
      <%= link_to chats_path, class: "profile-links text-success" do %>
        <i class="fas fa-envelope-open-text me-2"></i>CHAT
        <% if Notification.where(recipient_id: current_user).where(read_at: nil).count > 0 %>
          <span class="badge badge-danger">+ <%= Notification.where(recipient_id: current_user).where(read_at: nil).count %></span>
        <% end %>
      <% end %>
    </div>


    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5 text-success" id="exampleModalLabel">Editar informações</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <%= simple_form_for @profile, :url => profiles_path, :method => :patch do |f| %>
              <%= f.input :full_name %>
              <div class="d-flex justify-content-around">
                <%= f.input :document_number, input_html: { class: "mask-cpf  me-2" } %>
                <%= f.input :phone_number, input_html: { class: "mask-phone" } %>
              </div>
              <%= f.input :cep, input_html: { class: "mask-cep" } %>
              <%= f.input :address %>
              <%= f.input :show_contact, label: "Permitir informações de contato no anúncio?", as: :boolean, input_html: { class: "mt-3" } %>
              <%= f.input :photo, as: :file, input_html: { class: "mt-3" } %>

              <%= f.submit "Editar", class: "btn btn-success mt-3 w-100" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="user-infos mt-5">
      <h4 class="text-white"><span class="text-gray">Nome:</span> <%= @profile.full_name %></h4>
      <h4 class="text-white" ><span class="text-gray">Email:</span> <%= @profile.email %></h4>
      <h4 class="text-white" ><span class="text-gray">CPF:</span> <%= @profile.document_number %></h4>
      <h4 class="text-white" ><span class="text-gray">Contato:</span> <%= @profile.phone_number %></h4>
      <h4 class="text-white" ><span class="text-gray">Endereço:</span> <%= @profile.address %></h4>
      <h4 class="text-white" ><span class="text-gray">CEP:</span> <%= @profile.cep %></h4>
      <h4 class="text-white" ><span class="text-gray">Contato visível:</span> <%= @profile.show_contact? ? 'Sim' : "Não" %></h4>
    </div>
  </div>
</div>
