<div class="container advertisements mb-5">
  <% if @likes.blank? %>
   <h3 class="text-center my-3">NÃ£o favoritou nenhum produto ainda</h3>
  <% else %>
    <h3 class="text-center text-success py-3">Meus favoritos</h3>
    <div class="d-flex flex-wrap justify-content-around">
      <% @likes.each do | like| %>
        <% if like.likeble_type == "Bike" %>
          <%= link_to bike_path(like.likeble_id), class: "" do %>
            <div class="cards-bikes w-25">
              <div id="carouselExampleControls" class="carousel slide w-100" data-bs-ride="carousel">
                <% if like.likeble.photos.attached? %>
                  <div class="carousel-inner">
                    <% like.likeble.photos.each_with_index do |photo, i| %>
                      <div class="show-carousel-item carousel-item <%= i.zero? ? "active" : ""  %>">
                        <%= cl_image_tag photo.key, crop: :fit, class: 'd-block card-img'  %>
                      </div>
                    <% end %>
                  </div>
                <% else  %>
                    <%= image_tag "bike-forest.png", class: "card-img" %>
                <% end %>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
              <div class="d-flex justify-content-center gap-2 mt-1">
                <h4 class="card-title text-center"><%= like.likeble.frame_brand %></h4>
                <h4 class="card-title text-center"><%= like.likeble.model %></h4>
              </div>
              <h4 class="text-center card-title mt-1">
                <%= number_to_currency(like.likeble.price_in_cents / 100, unit: "R$", separator: ",", delimiter: ".") %>
              </h4>
              <hr class="index-line"/>
              <div class="card-content my-2">
                <div class="d-flex justify-content-around">
                  <div class="infos">
                    <p><%= like.likeble.locality %></p>
                    <p><%= like.likeble.bike_type %></p>
                  </div>
                  <div class="infos">
                    <%= link_to like_path(like), method: :delete, class: "dislike-btn", data: { confirm: "Tem certeza que deseja remover #{like.likeble.model} dos favoritos?"}  do %>
                      <i class="fas fa-heart"></i>
                    <% end %>
                    <% if like.likeble.bike_type == 'bike' %>
                      <%= image_tag "normal-bike.png", class: "icon-card-index"%>
                    <% else %>
                      <%= image_tag "e-bike.png", class: "icon-card-index"%>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% elsif like.likeble_type ==  "Product" %>
          <%= link_to product_path(like.likeble_id), class: "" do %>
            <div class="cards-products w-25">
              <div id="carouselExampleControls" class="carousel slide w-100" data-bs-ride="carousel">
              <% if like.likeble.photos.attached? %>
                <div class="carousel-inner">
                  <% like.likeble.photos.each_with_index do |photo, i| %>
                    <div class="show-carousel-item carousel-item <%= i.zero? ? "active" : ""  %>">
                      <%= cl_image_tag photo.key, crop: :fit, class: 'd-block card-img'  %>
                    </div>
                  <% end %>
                </div>
              <% else  %>
                  <%= image_tag "bike-forest.png", class: "card-img" %>
              <% end %>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
              <div class="d-flex justify-content-center gap-2 mt-1">
                <h4 class="card-title text-center"><%= like.likeble.brand %></h4>
                <h4 class="card-title text-center"><%= like.likeble.model %></h4>
              </div>
              <h4 class="text-center card-title mt-1">
                <%= number_to_currency(like.likeble.price_in_cents / 100, unit: "R$", separator: ",", delimiter: ".") %>
              </h4>
              <hr class="index-line"/>
              <div class="card-content my-2">
                <div class="d-flex justify-content-around">
                  <div class="infos">
                    <p><%= like.likeble.locality %></p>
                    <p><%= like.likeble.product_type.name %></p>
                  </div>
                  <div class="infos">
                    <%# <p><i class="far fa-heart"></i></p> %>
                    <%= link_to like_path(like), method: :delete, class: "dislike-btn", data: { confirm: "Tem certeza que deseja remover #{like.likeble.model} dos favoritos?"}  do %>
                      <i class="fas fa-heart"></i>
                    <% end %>
                    <% if  ["car_accessories", "bike_accessories", "training_accessories", "pre_after_pedal_accessories"].include?(like.likeble.product_type.name) %>
                      <%= image_tag "accessories.png", class: "icon-card-index"%>
                    <% elsif  ["battery", "brake", "brake_levers", "cassete","chain", "chainring", "crankset", "fender", "frame", "front_derailleur", "front_shifter", "front_suspension", "full_wheel", "grips", "handlebar", "headset", "hub", "pedals", "rim", "saddle", "seat_post", "spoke", "rear_derailleur", "rear_shifter", "rear_suspension", "stem", "tyre"].include?(like.likeble.product_type.name) %>
                      <%= image_tag "frame.png", class: "icon-card-index"%>
                    <% elsif  ["helmet", "elbow_pad", "knee_pad", "water_bottle", "bottle_cage", "hydration_backpack", "fanny_pack", "sneaker"].include?(like.likeble.product_type.name) %>
                      <%= image_tag "helmet.png", class: "icon-card-index"%>
                    <% elsif  ["cap", "glasses"].include?(like.likeble.product_type.name) %>
                      <%= image_tag "cap.png", class: "icon-card-index"%>
                    <% elsif  ["air_bomb", "lubricant", "sealant"].include?(like.likeble.product_type.name) %>
                      <%= image_tag "tools.png", class: "icon-card-index"%>
                    <% elsif  ["bretelle", "shorts", "inner_shorts", "shirt", "vest", "windbreaker", "thermal_clothing"].include?(like.likeble.product_type.name) %>
                      <%= image_tag "tshirt.png", class: "icon-card-index"%>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
